var test     = require('tape');
var arrayMax = require('../index.js');

test('basics', function(t) {
  t.plan(8);

  t.throws(function() {
    arrayMax();
  }, 'should throw if required `array` argument is missing');

  var data = { just: 'an object dawg' };

  t.throws(function() {
    arrayMax(data);
  }, 'should throw if required `array` argument is not an array');

  data = ['some', 'jabroni', 'data'];

  t.throws(function() {
    arrayMax(data);
  }, 'should throw if values are not numbers');

  data = [ { value: 6 }, { value: 24 }, { value: 'butt' } ];

  t.throws(function() {
    arrayMax(data, 'value');
  }, 'should throw if object values are not numbers');

  data = [ { value: -16 }, { value: 624 }, { value: 70 } ];

  t.throws(function() {
    arrayMax(data, 'cljghdslghd');
  }, 'should throw on invalid field');

  t.false(arrayMax([]), 'should return false if array is empty');

  data = [63, 12, 267, 29, 100, 259, -4004];

  t.equals(arrayMax(data), 267,
    'return max on array of numbers');

  data = [ { value: 600 }, { value: 4061 }, { value: 17 } ];

  t.equals(arrayMax(data, 'value'), 4061,
    'return max on array of objects');
});
